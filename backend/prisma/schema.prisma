generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Poll {
  id         String   @id @default(uuid())
  question   String
  options    Json     // { text: string, isCorrect: boolean }[]
  duration   Int      // seconds
  startTime  DateTime @map("start_time")
  status     String   @default("active") // "active" | "ended"
  createdAt  DateTime @default(now()) @map("created_at")
  votes      Vote[]

  @@map("polls")
}

model Vote {
  id          String   @id @default(uuid())
  pollId      String   @map("poll_id")
  studentId   String   @map("student_id")
  studentName String   @map("student_name")
  optionIndex Int      @map("option_index")
  createdAt   DateTime @default(now()) @map("created_at")
  poll        Poll     @relation(fields: [pollId], references: [id], onDelete: Cascade)

  @@unique([pollId, studentId])
  @@map("votes")
}
